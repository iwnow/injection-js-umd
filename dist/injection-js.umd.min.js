!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self)["injection-js"]={})}(this,(function(t){"use strict";const e=new WeakMap;function n(t,n,r,o){if(o&&!["string","symbol"].includes(typeof o))throw new TypeError;(i(r,o)||function(t,n){const r=e.get(t)||new Map;e.set(t,r);const o=r.get(n)||new Map;return r.set(n,o),o}(r,o)).set(t,n)}function r(t,e,n){return o(t,e,n)?o(t,e,n):Object.getPrototypeOf(e)?r(t,Object.getPrototypeOf(e),n):void 0}function o(t,e,n){if(void 0===e)throw new TypeError;const r=i(e,n);return r&&r.get(t)}function i(t,n){return e.get(t)&&e.get(t).get(n)}const a={decorate:function(t,e,n,r){if(0===t.length)throw new TypeError;return"function"==typeof e?function(t,e){return t.reverse().forEach(t=>{const n=t(e);n&&(e=n)}),e}(t,e):void 0!==n?function(t,e,n,r){return t.reverse().forEach(t=>{r=t(e,n,r)||r}),r}(t,e,n,r):void 0},defineMetadata:function(t,e,r,o){return n(t,e,r,o)},getMetadata:function(t,e,n){return r(t,e,n)},getOwnMetadata:function(t,e,n){return o(t,e,n)},hasMetadata:function(t,e,n){return!!r(t,e,n)},hasOwnMetadata:function(t,e,n){return!!o(t,e,n)},metadata:function(t,e){return function(r,o){n(t,e,r,o)}}};Object.assign(Reflect,a);var s="undefined"==typeof window?"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:global:window;function u(t){if("string"==typeof t)return t;if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;var e=t.toString(),n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}var c=0,f=s.Reflect;function p(t){return"function"==typeof t&&t.hasOwnProperty("annotation")&&(t=t.annotation),t}function l(t,e){if(t===Object||t===String||t===Function||t===Number||t===Array)throw new Error("Can not use native "+u(t)+" as constructor");if("function"==typeof t)return t;if(Array.isArray(t)){var n=t,r=n.length-1,o=t[r];if("function"!=typeof o)throw new Error("Last position of Class method array must be Function in key "+e+" was '"+u(o)+"'");if(r!==o.length)throw new Error("Number of annotations ("+r+") does not match number of arguments ("+o.length+") in the function: "+u(o));for(var i=[],a=0,s=n.length-1;a<s;a++){var c=[];i.push(c);var l=n[a];if(Array.isArray(l))for(var y=0;y<l.length;y++)c.push(p(l[y]));else"function"==typeof l?c.push(p(l)):c.push(l)}return f.defineMetadata("parameters",i,o),o}throw new Error("Only Function or Array is supported in Class definition for key '"+e+"' is '"+u(t)+"'")}function y(t){var e=l(t.hasOwnProperty("constructor")?t.constructor:void 0,"constructor"),n=e.prototype;if(t.hasOwnProperty("extends")){if("function"!=typeof t.extends)throw new Error("Class definition 'extends' property must be a constructor function was: "+u(t.extends));e.prototype=n=Object.create(t.extends.prototype)}for(var r in t)"extends"!==r&&"prototype"!==r&&t.hasOwnProperty(r)&&(n[r]=l(t[r],r));this&&this.annotations instanceof Array&&f.defineMetadata("annotations",this.annotations,e);var o=e.name;return o&&"constructor"!==o||(e.overriddenName="class"+c++),e}function h(t,e,n,r){var o=d([e]);function i(t){if(!f||!f.getOwnMetadata)throw"reflect-metadata shim is required when using class decorators";if(this instanceof i)return o.call(this,t),this;var e=new i(t),n="function"==typeof this&&Array.isArray(this.annotations)?this.annotations:[];n.push(e);var a=function(t){var n=f.getOwnMetadata("annotations",t)||[];return n.push(e),f.defineMetadata("annotations",n,t),t};return a.annotations=n,a.Class=y,r&&r(a),a}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.toString=function(){return"@"+t},i.annotationCls=i,i}function d(t){return function(){for(var e=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];t.forEach((function(t,r){var o=n[r];if(Array.isArray(t))e[t[0]]=void 0===o?t[1]:o;else for(var i in t)e[i]=o&&o.hasOwnProperty(i)?o[i]:t[i]}))}}function v(t,e,n){var r=d(e);function o(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(this instanceof o)return r.apply(this,e),this;var i=new((t=o).bind.apply(t,[void 0].concat(e)));return a.annotation=i,a;function a(t,e,n){for(var r=f.getOwnMetadata("parameters",t)||[];r.length<=n;)r.push(null);return r[n]=r[n]||[],r[n].push(i),f.defineMetadata("parameters",r,t),t}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.toString=function(){return"@"+t},o.annotationCls=o,o}var g=v("Inject",[["token",void 0]]),w=v("Optional",[]),m=h("Injectable",[]),b=v("Self",[]),_=v("SkipSelf",[]),O=v("Host",[]);function j(t){return t.__forward_ref__=j,t.toString=function(){return u(this())},t}function k(t){return"function"==typeof t&&t.hasOwnProperty("__forward_ref__")&&t.__forward_ref__===j?t():t}var M=new Object,P=M,C=function(){function t(){}return t.prototype.get=function(t,e){if(void 0===e&&(e=M),e===M)throw new Error("No provider for "+u(t)+"!");return e},t}(),A=function(){function t(){}return t.THROW_IF_NOT_FOUND=M,t.NULL=new C,t}();function E(t){return t.length>1?" ("+function(t){for(var e=[],n=0;n<t.length;++n){if(e.indexOf(t[n])>-1)return e.push(t[n]),e;e.push(t[n])}return e}(t.slice().reverse()).map((function(t){return u(t.token)})).join(" -> ")+")":""}function F(t,e,n,r){var o=r?function(t,e){var n=t+" caused by: "+(e instanceof Error?e.message:e),r=Error(n);return r.ngOriginalError=e,r}("",r):Error();return o.addKey=I,o.keys=[e],o.injectors=[t],o.constructResolvingMessage=n,o.message=o.constructResolvingMessage(),o.ngOriginalError=r,o}function I(t,e){this.injectors.push(t),this.keys.push(e),this.message=this.constructResolvingMessage()}function K(t,e){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];i&&0!==i.length?n.push(i.map(u).join(" ")):n.push("?")}return Error("Cannot resolve all parameters for '"+u(t)+"'("+n.join(", ")+"). Make sure that all the parameters are decorated with Inject or have valid type annotations and that '"+u(t)+"' is decorated with Injectable.")}var R=function(){function t(t,e){if(this.token=t,this.id=e,!t)throw new Error("Token must be defined!")}return Object.defineProperty(t.prototype,"displayName",{get:function(){return u(this.token)},enumerable:!0,configurable:!0}),t.get=function(t){return S.get(k(t))},Object.defineProperty(t,"numberOfKeys",{get:function(){return S.numberOfKeys},enumerable:!0,configurable:!0}),t}(),S=new(function(){function t(){this._allKeys=new Map}return t.prototype.get=function(t){if(t instanceof R)return t;if(this._allKeys.has(t))return this._allKeys.get(t);var e=new R(t,R.numberOfKeys);return this._allKeys.set(t,e),e},Object.defineProperty(t.prototype,"numberOfKeys",{get:function(){return this._allKeys.size},enumerable:!0,configurable:!0}),t}()),x=Function;function N(t){return"function"==typeof t}var T=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*arguments\)/,B=function(){function t(t){this._reflect=t||s.Reflect}return t.prototype.isReflectionEnabled=function(){return!0},t.prototype.factory=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new(t.bind.apply(t,[void 0].concat(e)))}},t.prototype._zipTypesAndAnnotations=function(t,e){var n;n=new Array(void 0===t?e.length:t.length);for(var r=0;r<n.length;r++)void 0===t?n[r]=[]:t[r]!=Object?n[r]=[t[r]]:n[r]=[],e&&null!=e[r]&&(n[r]=n[r].concat(e[r]));return n},t.prototype._ownParameters=function(t,e){if(T.exec(t.toString()))return null;if(t.parameters&&t.parameters!==e.parameters)return t.parameters;var n=t.ctorParameters;if(n&&n!==e.ctorParameters){var r="function"==typeof n?n():n,o=r.map((function(t){return t&&t.type})),i=r.map((function(t){return t&&D(t.decorators)}));return this._zipTypesAndAnnotations(o,i)}if(null!=this._reflect&&null!=this._reflect.getOwnMetadata){i=this._reflect.getOwnMetadata("parameters",t);if((o=this._reflect.getOwnMetadata("design:paramtypes",t))||i)return this._zipTypesAndAnnotations(o,i)}return new Array(t.length).fill(void 0)},t.prototype.parameters=function(t){if(!N(t))return[];var e=U(t),n=this._ownParameters(t,e);return n||e===Object||(n=this.parameters(e)),n||[]},t.prototype._ownAnnotations=function(t,e){if(t.annotations&&t.annotations!==e.annotations){var n=t.annotations;return"function"==typeof n&&n.annotations&&(n=n.annotations),n}return t.decorators&&t.decorators!==e.decorators?D(t.decorators):this._reflect&&this._reflect.getOwnMetadata?this._reflect.getOwnMetadata("annotations",t):null},t.prototype.annotations=function(t){if(!N(t))return[];var e=U(t),n=this._ownAnnotations(t,e)||[];return(e!==Object?this.annotations(e):[]).concat(n)},t.prototype._ownPropMetadata=function(t,e){if(t.propMetadata&&t.propMetadata!==e.propMetadata){var n=t.propMetadata;return"function"==typeof n&&n.propMetadata&&(n=n.propMetadata),n}if(t.propDecorators&&t.propDecorators!==e.propDecorators){var r=t.propDecorators,o={};return Object.keys(r).forEach((function(t){o[t]=D(r[t])})),o}return this._reflect&&this._reflect.getOwnMetadata?this._reflect.getOwnMetadata("propMetadata",t):null},t.prototype.propMetadata=function(t){if(!N(t))return{};var e=U(t),n={};if(e!==Object){var r=this.propMetadata(e);Object.keys(r).forEach((function(t){n[t]=r[t]}))}var o=this._ownPropMetadata(t,e);return o&&Object.keys(o).forEach((function(t){var e=[];n.hasOwnProperty(t)&&e.push.apply(e,n[t]),e.push.apply(e,o[t]),n[t]=e})),n},t.prototype.hasLifecycleHook=function(t,e){return t instanceof x&&e in t.prototype},t.prototype.getter=function(t){return new Function("o","return o."+t+";")},t.prototype.setter=function(t){return new Function("o","v","return o."+t+" = v;")},t.prototype.method=function(t){return new Function("o","args","if (!o."+t+") throw new Error('\""+t+"\" is undefined');\n        return o."+t+".apply(o, args);")},t.prototype.importUri=function(t){return"object"==typeof t&&t.filePath?t.filePath:"./"+u(t)},t.prototype.resourceUri=function(t){return"./"+u(t)},t.prototype.resolveIdentifier=function(t,e,n,r){return r},t.prototype.resolveEnum=function(t,e){return t[e]},t}();function D(t){return t?t.map((function(t){var e=t.type.annotationCls,n=t.args?t.args:[];return new(e.bind.apply(e,[void 0].concat(n)))})):[]}function U(t){var e=Object.getPrototypeOf(t.prototype);return(e?e.constructor:null)||Object}var H=function(t,e){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function L(t,e){function n(){this.constructor=t}H(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var z=new(function(t){function e(e){var n=t.call(this)||this;return n.reflectionCapabilities=e,n}return L(e,t),e.prototype.updateCapabilities=function(t){this.reflectionCapabilities=t},e.prototype.factory=function(t){return this.reflectionCapabilities.factory(t)},e.prototype.parameters=function(t){return this.reflectionCapabilities.parameters(t)},e.prototype.annotations=function(t){return this.reflectionCapabilities.annotations(t)},e.prototype.propMetadata=function(t){return this.reflectionCapabilities.propMetadata(t)},e.prototype.hasLifecycleHook=function(t,e){return this.reflectionCapabilities.hasLifecycleHook(t,e)},e.prototype.getter=function(t){return this.reflectionCapabilities.getter(t)},e.prototype.setter=function(t){return this.reflectionCapabilities.setter(t)},e.prototype.method=function(t){return this.reflectionCapabilities.method(t)},e.prototype.importUri=function(t){return this.reflectionCapabilities.importUri(t)},e.prototype.resourceUri=function(t){return this.reflectionCapabilities.resourceUri(t)},e.prototype.resolveIdentifier=function(t,e,n,r){return this.reflectionCapabilities.resolveIdentifier(t,e,n,r)},e.prototype.resolveEnum=function(t,e){return this.reflectionCapabilities.resolveEnum(t,e)},e}((function(){})))(new B),W=function(){function t(t){this._desc=t}return t.prototype.toString=function(){return"Token "+this._desc},t}(),q=function(t){function e(e){return t.call(this,e)||this}return L(e,t),e.prototype.toString=function(){return"InjectionToken "+this._desc},e}(W),G=function(){function t(t,e,n){this.key=t,this.optional=e,this.visibility=n}return t.fromKey=function(e){return new t(e,!1,null)},t}(),V=[],J=function(){function t(t,e,n){this.key=t,this.resolvedFactories=e,this.multiProvider=n}return Object.defineProperty(t.prototype,"resolvedFactory",{get:function(){return this.resolvedFactories[0]},enumerable:!0,configurable:!0}),t}(),Q=function(t,e){this.factory=t,this.dependencies=e};function X(t){var e,n;if(t.useClass){var r=k(t.useClass);e=z.factory(r),n=$(r)}else t.useExisting?(e=function(t){return t},n=[G.fromKey(R.get(t.useExisting))]):t.useFactory?(e=t.useFactory,n=function(t,e){if(e){var n=e.map((function(t){return[t]}));return e.map((function(e){return tt(t,e,n)}))}return $(t)}(t.useFactory,t.deps)):(e=function(){return t.useValue},n=V);return new Q(e,n)}function Y(t){return new J(R.get(t.provide),[X(t)],t.multi||!1)}function Z(t){var e=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=e.get(r.key.id);if(o){if(r.multiProvider!==o.multiProvider)throw Error("Cannot mix multi providers and regular providers, got: "+o+" "+r);if(r.multiProvider)for(var i=0;i<r.resolvedFactories.length;i++)o.resolvedFactories.push(r.resolvedFactories[i]);else e.set(r.key.id,r)}else{var a=void 0;a=r.multiProvider?new J(r.key,r.resolvedFactories.slice(),r.multiProvider):r,e.set(r.key.id,a)}}return e}(function t(e,n){return e.forEach((function(e){if(e instanceof x)n.push({provide:e,useClass:e});else if(e&&"object"==typeof e&&void 0!==e.provide)n.push(e);else{if(!(e instanceof Array))throw Error("Invalid provider - only instances of Provider and Type are allowed, got: "+e);t(e,n)}})),n}(t,[]).map(Y),new Map);return Array.from(e.values())}function $(t){var e=z.parameters(t);if(!e)return[];if(e.some((function(t){return null==t})))throw K(t,e);return e.map((function(n){return tt(t,n,e)}))}function tt(t,e,n){var r=null,o=!1;if(!Array.isArray(e))return et(e instanceof g?e.token:e,o,null);for(var i=null,a=0;a<e.length;++a){var s=e[a];s instanceof x?r=s:s instanceof g?r=s.token:s instanceof w?o=!0:s instanceof b||s instanceof _?i=s:s instanceof q&&(r=s)}if(null!=(r=k(r)))return et(r,o,i);throw K(t,n)}function et(t,e,n){return new G(R.get(t),e,n)}var nt=new Object,rt=function(){function t(){}return t.resolve=function(t){return Z(t)},t.resolveAndCreate=function(e,n){var r=t.resolve(e);return t.fromResolvedProviders(r,n)},t.fromResolvedProviders=function(t,e){return new ot(t,e)},t}(),ot=function(){function t(t,e){this._constructionCounter=0,this._providers=t,this._parent=e||null;var n=t.length;this.keyIds=new Array(n),this.objs=new Array(n);for(var r=0;r<n;r++)this.keyIds[r]=t[r].key.id,this.objs[r]=nt}return t.prototype.get=function(t,e){return void 0===e&&(e=P),this._getByKey(R.get(t),null,e)},Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),t.prototype.resolveAndCreateChild=function(t){var e=rt.resolve(t);return this.createChildFromResolved(e)},t.prototype.createChildFromResolved=function(e){var n=new t(e);return n._parent=this,n},t.prototype.resolveAndInstantiate=function(t){return this.instantiateResolved(rt.resolve([t])[0])},t.prototype.instantiateResolved=function(t){return this._instantiateProvider(t)},t.prototype.getProviderAtIndex=function(t){if(t<0||t>=this._providers.length)throw function(t){return Error("Index "+t+" is out-of-bounds.")}(t);return this._providers[t]},t.prototype._new=function(t){if(this._constructionCounter++>this._getMaxNumberOfObjects())throw e=this,n=t.key,F(e,n,(function(){return"Cannot instantiate cyclic dependency!"+E(this.keys)}));var e,n;return this._instantiateProvider(t)},t.prototype._getMaxNumberOfObjects=function(){return this.objs.length},t.prototype._instantiateProvider=function(t){if(t.multiProvider){for(var e=new Array(t.resolvedFactories.length),n=0;n<t.resolvedFactories.length;++n)e[n]=this._instantiate(t,t.resolvedFactories[n]);return e}return this._instantiate(t,t.resolvedFactories[0])},t.prototype._instantiate=function(t,e){var n,r,o,i,a,s=this,c=e.factory;try{n=e.dependencies.map((function(t){return s._getByReflectiveDependency(t)}))}catch(e){throw e.addKey&&e.addKey(this,t.key),e}try{r=c.apply(void 0,n)}catch(e){throw o=this,i=e,e.stack,a=t.key,F(o,a,(function(){var t,e=u(this.keys[0].token);return(t=this,t.ngOriginalError).message+": Error during instantiation of "+e+"!"+E(this.keys)+"."}),i)}return r},t.prototype._getByReflectiveDependency=function(t){return this._getByKey(t.key,t.visibility,t.optional?null:P)},t.prototype._getByKey=function(t,e,n){return t===it?this:e instanceof b?this._getByKeySelf(t,n):this._getByKeyDefault(t,n,e)},t.prototype._getObjByKeyId=function(t){for(var e=0;e<this.keyIds.length;e++)if(this.keyIds[e]===t)return this.objs[e]===nt&&(this.objs[e]=this._new(this._providers[e])),this.objs[e];return nt},t.prototype._throwOrNull=function(t,e){if(e!==P)return e;throw function(t,e){return F(t,e,(function(){return"No provider for "+u(this.keys[0].token)+"!"+E(this.keys)}))}(this,t)},t.prototype._getByKeySelf=function(t,e){var n=this._getObjByKeyId(t.id);return n!==nt?n:this._throwOrNull(t,e)},t.prototype._getByKeyDefault=function(e,n,r){var o;for(o=r instanceof _?this._parent:this;o instanceof t;){var i=o,a=i._getObjByKeyId(e.id);if(a!==nt)return a;o=i._parent}return null!==o?o.get(e.token,n):this._throwOrNull(e,n)},Object.defineProperty(t.prototype,"displayName",{get:function(){return"ReflectiveInjector(providers: ["+function(t,e){for(var n=new Array(t._providers.length),r=0;r<t._providers.length;++r)n[r]=e(t.getProviderAtIndex(r));return n}(this,(function(t){return' "'+t.key.displayName+'" '})).join(", ")+"])"},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this.displayName},t}(),it=R.get(A);t.Class=y,t.Host=O,t.Inject=g,t.Injectable=m,t.InjectionToken=q,t.Injector=A,t.OpaqueToken=W,t.Optional=w,t.ReflectiveInjector=rt,t.ReflectiveKey=R,t.ResolvedReflectiveFactory=Q,t.Self=b,t.SkipSelf=_,t.Type=x,t.forwardRef=j,t.isType=N,t.makeDecorator=h,t.resolveDependencies=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=new Set;function r(t){n.has(t)||(n.add(t),rt.resolve([t]).reduce((function(t,e){return t.concat(e.resolvedFactories)}),[]).reduce((function(t,e){return t.concat(e.dependencies)}),[]).forEach((function(t){return r(t.key.token)})))}for(var o=0,i=t;o<i.length;o++){var a=i[o];r(a)}return Array.from(n)},t.resolveForwardRef=k,Object.defineProperty(t,"__esModule",{value:!0})}));
